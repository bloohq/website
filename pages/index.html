<!-- Main content -->
<!-- Custom personalized page heading for homepage -->
<div class="mb-16" x-data="{ 
    authState: null,
    words: [],
    animatedWords: [], 
    showSubtitle: false,
    init() {
        // Function to set up title animation
        const setupTitle = (authState) => {
            const firstName = (authState && authState.firstName) || '{{t "home.welcome_default"}}';
            const title = authState && authState.isLoggedIn
                ? `{{t "home.welcome_back"}}${firstName}{{t "home.welcome_suffix"}}`
                : '{{t "home.hero_title"}}';
                
            this.words = title.split(' ');
            this.animatedWords = [];
            this.showSubtitle = false;
            
            // Animate words
            this.words.forEach((word, i) => setTimeout(() => this.animatedWords.push(i), i * 80)); 
            setTimeout(() => this.showSubtitle = true, 100);
        };
        
        // Initial setup with null state
        setupTitle(null);
        
        // Subscribe to auth state changes if available
        if (window.AuthStateManager) {
            this.unsubscribe = window.AuthStateManager.subscribe((authState) => {
                // Only re-animate if state actually changed
                if (JSON.stringify(authState) !== JSON.stringify(this.authState)) {
                    this.authState = authState;
                    setupTitle(authState);
                }
            });
        } else {
            // Try again after a short delay in case AuthStateManager loads later
            setTimeout(() => {
                if (window.AuthStateManager) {
                    this.unsubscribe = window.AuthStateManager.subscribe((authState) => {
                        if (JSON.stringify(authState) !== JSON.stringify(this.authState)) {
                            this.authState = authState;
                            setupTitle(authState);
                        }
                    });
                }
            }, 100);
        }
    },
    destroy() {
        // Clean up subscription
        if (this.unsubscribe) {
            this.unsubscribe();
        }
    }
}">
    <h1 class="text-4xl md:text-6xl lg:text-6xl font-medium tracking-tight text-gray-900 dark:text-gray-100 mb-3">
        <template x-for="(word, index) in words" :key="index">
            <span 
                :class="animatedWords.includes(index) ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-2'" 
                class="inline-block mr-2 transition-all duration-300 ease-out" 
                x-text="word">
            </span>
        </template>
    </h1>
    <p 
        :class="showSubtitle ? 'opacity-100 translate-y-0' : 'opacity-0 translate-y-2'" 
        class="text-xl text-gray-600 dark:text-gray-400 transition-all duration-800 ease-out">
        <span x-show="authState && authState.isLoggedIn">{{t "home.hero_subtitle_logged_in"}}</span>
        <span x-show="!authState || !authState.isLoggedIn">{{t "home.hero_subtitle_default"}}</span>
    </p>
</div>

    {{template "hero-video" 
        dict 
            "VideoUrl" "/testvideo2.mp4"
            "ShowUnmuteButton" true
            "Id" "homepage"
    }}

    <!-- Hero CTAs -->
    <div class="mt-8 flex flex-col sm:flex-row gap-4 justify-center" x-data="{ 
        authState: null,
        init() {
            // Subscribe to auth state changes
            if (window.AuthStateManager) {
                this.unsubscribe = window.AuthStateManager.subscribe((authState) => {
                    this.authState = authState;
                });
            }
        },
        destroy() {
            // Clean up subscription
            if (this.unsubscribe) {
                this.unsubscribe();
            }
        }
    }">
        <a href="https://app.blue.cc" 
           target="_blank"
           class="inline-flex items-center justify-center px-6 py-3 text-base font-semibold rounded-lg bg-brand-blue text-white hover:bg-brand-blue/90 transition-colors duration-200 shadow-lg hover:shadow-xl group">
            <span x-show="authState && authState.isLoggedIn">{{t "home.cta_dashboard"}}</span>
            <span x-show="!authState || !authState.isLoggedIn">{{t "home.cta_get_started"}}</span>
            <svg class="ml-2 w-5 h-5 transition-transform duration-200 ease-out group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14 5l7 7m0 0l-7 7m7-7H3"></path>
            </svg>
        </a>
        <a :href="authState && authState.isLoggedIn ? '/platform/changelog' : '/platform/features'" 
           class="inline-flex items-center justify-center px-6 py-3 text-base font-semibold rounded-lg border-2 border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors duration-200">
            <span x-show="authState && authState.isLoggedIn">{{t "home.cta_whats_new"}}</span>
            <span x-show="!authState || !authState.isLoggedIn">{{t "home.cta_see_how"}}</span>
        </a>
    </div>
    
    <!-- News Bar -->
    <div class="mt-8">
        {{$newsBarData := parseJSON (printf `{
            "MainText": "%s",
            "ButtonText": "%s",
            "ButtonUrl": "/platform/white-label"
        }` (t "home.news_bar.main_text") (t "home.news_bar.button_text"))}}
        {{template "news-bar" $newsBarData}}
    </div>
    
  
    {{$logoData := parseJSON (printf `{
        "title": "%s", 
        "logos": [
            { "name": "CBRE", "src": "/customers/cbre.svg" },
            { "name": "Cisco", "src": "/customers/cisco.svg" },
            { "name": "Deloitte", "src": "/customers/deloitte.svg" },
            { "name": "FedEx", "src": "/customers/fedex.svg" },
            { "name": "Manulife", "src": "/customers/manulife.svg" },
            { "name": "Red Hat", "src": "/customers/redhat.svg" },
            { "name": "Heineken", "src": "/customers/heineken.svg" },
            { "name": "Sheraton", "src": "/customers/sheraton.svg" },
            { "name": "Columbia University", "src": "/customers/columbia-university.webp" },
            { "name": "Save the Children", "src": "/customers/savethechildren.svg" },
            { "name": "World Food Programme", "src": "/customers/wfp.svg" },
            { "name": "ILO", "src": "/customers/ilo.webp" }
        ]
    }` (t "home.trusted_by"))}}
    
    {{template "logo-grid" $logoData}}

    {{$valuePropsData := parseJSON (printf `{
        "Title": "%s",
        "Description": "%s",
        "ValueProps": [
            {
                "Title": "%s",
                "Description": "%s"
            },
            {
                "Title": "%s",
                "Description": "%s"
            },
            {
                "Title": "%s",
                "Description": "%s"
            }
        ]
    }` (t "home.designed_to_turn.title") (t "home.designed_to_turn.description") (t "home.designed_to_turn.value_props.built_for_work.title") (t "home.designed_to_turn.value_props.built_for_work.description") (t "home.designed_to_turn.value_props.platform_for_customers.title") (t "home.designed_to_turn.value_props.platform_for_customers.description") (t "home.designed_to_turn.value_props.fair_pricing.title") (t "home.designed_to_turn.value_props.fair_pricing.description"))}}
    
    {{template "value-propositions" $valuePropsData}}



<!-- Features as Benefits Section -->
<section class="max-w-7xl mx-auto">
    <h3 class="text-3xl md:text-4xl font-medium tracking-tight text-gray-900 mb-16">{{t "home.work_the_way"}}</h3>
    
    <!-- One source of truth -->
    <div class="mb-20">
        {{$automateData := parseJSON (printf `{
            "Title": "%s",
            "Description": "%s",
            "VideoUrl": "/testvideo2.mp4",
            "VideoPosition": "left",
            "SeeAlso": {
                "Links": [
                    {
                        "Text": "%s",
                        "Url": "/platform/features/records",
                        "Description": "%s"
                    },
                    {
                        "Text": "%s",
                        "Url": "/platform/features/custom-fields",
                        "Description": "%s"
                    },
                    {
                        "Text": "%s",
                        "Url": "/platform/features/workspaces",
                        "Description": "%s"
                    }
                ]
            }
        }` (t "home.features.one_source.title") (t "home.features.one_source.description") (t "home.features.one_source.see_also.records.text") (t "home.features.one_source.see_also.records.description") (t "home.features.one_source.see_also.custom_fields.text") (t "home.features.one_source.see_also.custom_fields.description") (t "home.features.one_source.see_also.workspaces.text") (t "home.features.one_source.see_also.workspaces.description"))}}
        {{template "feature-video" $automateData}}
    </div>

     <!-- See Everything, Miss Nothing -->
     <div class="mb-20">
        {{$seeEverythingData := parseJSON (printf `{
            "Title": "%s",
            "Description": "%s",
            "VideoUrl": "/testvideo2.mp4",
            "VideoPosition": "right",
            "SeeAlso": {
                "Links": [
                    {
                        "Text": "%s",
                        "Url": "/docs/records/lists",
                        "Description": "%s"
                    },
                    {
                        "Text": "%s",
                        "Url": "/insights/create-checklist-templates",
                        "Description": "%s"
                    },
                    {
                        "Text": "%s",
                        "Url": "/platform/features/forms",
                        "Description": "%s"
                    }
                ]
            }
        }` (t "home.features.everything_process.title") (t "home.features.everything_process.description") (t "home.features.everything_process.see_also.lists.text") (t "home.features.everything_process.see_also.lists.description") (t "home.features.everything_process.see_also.checklists.text") (t "home.features.everything_process.see_also.checklists.description") (t "home.features.everything_process.see_also.forms.text") (t "home.features.everything_process.see_also.forms.description"))}}
        {{template "feature-video" $seeEverythingData}}
    </div>
   
    <!-- Create Clear Process -->
    <div class="mb-20">
        {{$automateData := parseJSON (printf `{
            "Title": "%s",
            "Description": "%s",
            "VideoUrl": "https://media.blue.cc/automations-on-off.mp4",
            "VideoPosition": "left"
        }` (t "home.features.automations.title") (t "home.features.automations.description"))}}
        {{template "feature-video" $automateData}}
    </div>


   

    

    <section class="mb-16">
                    
                    {{$statsData := parseJSON (printf `{
                        "Title": "%s",
                        "Stats": [
                            {
                                "Number": "%s",
                                "Description": "%s"
                            },
                            {
                                "Number": "%s",
                                "Description": "%s"
                            },
                            {
                                "Number": "%s",
                                "Description": "%s"
                            }
                        ]
                    }` (t "home.stats.title") (t "home.stats.teams.number") (t "home.stats.teams.description") (t "home.stats.processes.number") (t "home.stats.processes.description") (t "home.stats.records.number") (t "home.stats.records.description"))}}
                    
                    {{template "stats-section" $statsData}}
    </section>

    {{$testimonialData := parseJSON (printf `{
        "testimonials": [
            {
                "quote": "%s",
                "videoUrl": "https://media.blue.cc/davidzack-testimonial.mp4",
                "posterUrl": "/testimonials/davidsacks.jpeg"
            },
            {
                "quote": "%s",
                "videoUrl": "https://media.blue.cc/lady.mp4",
                "posterUrl": "/testimonials/lady.jpg"
            },
            {
                "quote": "%s",
                "videoUrl": "https://media.blue.cc/ricklews-testimonial.mov",
                "posterUrl": "/testimonials/ricklewis.jpg"
            },
            {
                "quote": "%s",
                "videoUrl": "https://media.blue.cc/ana.mov",
                "posterUrl": "/testimonials/ana-testimonial.jpg"
            }
        ]
    }` (t "home.testimonials.quote_1") (t "home.testimonials.quote_2") (t "home.testimonials.quote_3") (t "home.testimonials.quote_4"))}}

    {{template "testimonial-videos" $testimonialData}}


    <!-- Your Data, Your Way -->
    <div class="mb-20">
        {{$yourDataData := parseJSON (printf `{
            "Title": "%s",
            "Description": "%s",
            "VideoUrl": "https://media.blue.cc/custom-fields-showcase.mp4",
            "VideoPosition": "right"
        }` (t "home.features.your_data.title") (t "home.features.your_data.description"))}}
        {{template "feature-video" $yourDataData}}
    </div>

    <!-- Insights That Drive Action -->
    <div class="mb-20">
        {{$insightsData := parseJSON (printf `{
            "Title": "%s",
            "Description": "%s",
            "VideoUrl": "https://media.blue.cc/dashboard-showcase.mp4",
            "VideoPosition": "left"
        }` (t "home.features.dashboards.title") (t "home.features.dashboards.description"))}}
        {{template "feature-video" $insightsData}}
    </div>
</section>

<!-- Likely need a unique integrations area here with various logos.-->

    <!-- Features Grid Section -->
    {{$featuresData := parseJSON (printf `{
        "Title": "%s",
        "Features": [
            {   
                "Title": "%s",
                "Description": "%s",
                "Url": "/platform/security"
            },
            {
                "Title": "%s",
                "Description": "%s",
                "Url": "/platform/performance"
            },
            {
                "Title": "%s",
                "Description": "%s"
            },
            {
                "Title": "%s",
                "Description": "%s",
                "Url": "/platform/integrations"
            },
            {
                "Title": "%s",
                "Description": "%s"
            },
            {
                "Title": "%s",
                "Description": "%s"
            },
            {
                "Title": "%s",
                "Description": "%s"
            },
            {
                "Title": "%s",
                "Description": "%s"
            },
            {
                "Title": "%s",
                "Description": "%s"
            }
        ]
    }` (t "home.features_grid.title") (t "home.features_grid.security.title") (t "home.features_grid.security.description") (t "home.features_grid.performance.title") (t "home.features_grid.performance.description") (t "home.features_grid.analytics.title") (t "home.features_grid.analytics.description") (t "home.features_grid.integrations.title") (t "home.features_grid.integrations.description") (t "home.features_grid.automations_grid.title") (t "home.features_grid.automations_grid.description") (t "home.features_grid.mobile.title") (t "home.features_grid.mobile.description") (t "home.features_grid.collaboration.title") (t "home.features_grid.collaboration.description") (t "home.features_grid.customization.title") (t "home.features_grid.customization.description") (t "home.features_grid.support.title") (t "home.features_grid.support.description"))}}
    
    {{template "features-grid-simple" $featuresData}}
       
 <!-- Integration Partners -->
 <div class="mb-16">
    {{$integrationData := parseJSON (printf `{
        "title": "%s",
        "logos": [
            { "name": "Zapier", "src": "/images/zapier.svg" },
            { "name": "Make.com", "src": "/images/make.svg" },
            { "name": "Pabbly Connect", "src": "/images/pabbly.svg" },
            { "name": "Albato", "src": "/images/albato.png" },
            { "name": "Boost.space", "src": "/images/boost-space.svg" }
        ]
    }` (t "home.integrations.title"))}}
    {{template "logo-grid" $integrationData}}
</div>


<!-- Interactive Feature Showcase Section 

I wonder if process management is really needed, is that a "use case"? -->
<section class="mb-8">
        
    {{$showcaseData := parseJSON (printf `{
        "Title": "%s",
        "Features": [
            {
                "Id": "process-management",
                "Title": "%s", 
                "VideoUrl": "/video3.mp4"
            },
            {
                "Id": "project-management",
                "Title": "%s",
                "ImageUrl": "https://www.blue.cc/product/simple-screenshot-home.png"
            },
            {
                "Id": "sales-crm",
                "Title": "%s",
                "VideoUrl": "/video4.mp4"
            },
            {
                "Id": "service-tickets",
                "Title": "%s",
                "ImageUrl": "https://www.blue.cc/product/simple-screenshot-home.png"
            },
            {
                "Id": "asset-management",
                "Title": "%s",
                "VideoUrl": "/testvideo2.mp4"
            },
            {
                "Id": "content-calendar",
                "Title": "%s",
                "ImageUrl": "https://www.blue.cc/product/simple-screenshot-home.png"
            }
        ]
    }` (t "home.use_cases.title") (t "home.use_cases.process_management") (t "home.use_cases.project_management") (t "home.use_cases.sales_crm") (t "home.use_cases.service_tickets") (t "home.use_cases.asset_management") (t "home.use_cases.content_calendar"))}}
    
    {{template "interactive-feature-showcase" $showcaseData}}
</section>

   <!-- Testimonial Section -->
   <div class="mb-20 px-6 lg:px-8">
    {{template "testimonial-single" 
        dict 
            "ImageUrl" "/testimonials/kyriacos.jpeg"
            "Quote" (t "home.testimonial_kyriacos.quote")
            "Name" (t "home.testimonial_kyriacos.name")
            "Title" (t "home.testimonial_kyriacos.title")
    }}
</div>

<!-- Call to Action -->
{{$ctaData := parseJSON (printf `{
    "Title": "%s",
    "SecondaryText": "%s",
    "SecondaryUrl": "/contact",
    "PrimaryText": "%s",
    "PrimaryUrl": "https://app.blue.cc"
}` (t "home.cta_final.title") (t "home.cta_final.secondary_text") (t "home.cta_final.primary_text"))}}

{{template "dual-button-cta" $ctaData}}

